@model Validate.Result;
@{
    ViewBag.Title = "Validate - Swedish Personal Identity Numbers";
}

<h1 class="h2">
    Validate
    <small class="text-muted">Swedish Personal Identity Numbers</small>
</h1>

<p class="lead py-3">
    A Swedish personal identity number can be written in a lot of different ways. It normally takes one of the standard forms (YYMMDD-XXXX, YYMMDD+XXXX or YYYYMMDDXXXX) but can also include variations with whitespaces etc. Use the form below to parse a value and find out data that be extracted form the number such as date of birth and gender.
</p>


<section class="card bg-white text-center mb-3">
    <div class="card-body py-5">
        <div style="max-width: 400px; margin: 0 auto;">
            <form asp-action="Validate" method="post">
                <div class="form-group">
                    <label asp-for="NumberInput">Swedish Personal Identity Number</label>
                    <input type="tel" class="form-control form-control-lg text-center" name="number" asp-for="NumberInput" required maxlength="50" placeholder="YYMMDD-XXXX" />
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary btn-block">Parse &amp; Validate</button>
                </div>
            </form>
        </div>
    </div>
</section>

@if (!string.IsNullOrEmpty(Model.NumberInput))
{
    if (Model.IsValid)
    {
        <div class="alert alert-success text-center" role="alert">
            <i class="fal fa-badge-check"></i> <strong>@Model.NumberInput</strong> is recognized as a valid Swedish Personal Identity Number!
        </div>

        if (Model.Number.HasValue)
        {
            var number = Model.Number.Value;

            <section class="card bg-white mt-3">
                <h4 class="card-header text-center"><i class="fal fa-id-badge"></i> @number.TenDigitString</h4>
                <div class="card-body px-0 py-0">
                    <table class="table table-hover table-striped ii-spin-info-table my-0">
                        <tr>
                            <th>10 Digit String</th>
                            <td>@number.TenDigitString</td>
                            <td>Explanation</td>
                        </tr>
                        <tr>
                            <th>12 Digit String</th>
                            <td>@number.TwelveDigitString</td>
                            <td>Explanation</td>
                        </tr>
                        <tr>
                            <th>Year</th>
                            <td>@number.Year.ToString("0000")</td>
                            <td>Explanation</td>
                        </tr>
                        <tr>
                            <th>Month</th>
                            <td>@number.Month.ToString("00")</td>
                            <td>Explanation</td>
                        </tr>
                        <tr>
                            <th>Day</th>
                            <td>@number.Day.ToString("00")</td>
                            <td>Explanation</td>
                        </tr>
                        <tr>
                            <th>Delimiter</th>
                            <td>@number.Delimiter</td>
                            <td>Explanation</td>
                        </tr>
                        <tr>
                            <th>Birth Number</th>
                            <td>@number.BirthNumber.ToString("000")</td>
                            <td>Explanation</td>
                        </tr>
                        <tr>
                            <th>Checksum</th>
                            <td>@number.Checksum</td>
                            <td>Explanation</td>
                        </tr>
                        <tr>
                            <th>Gender</th>
                            <td>@number.GenderHint</td>
                            <td>Explanation</td>
                        </tr>
                        <tr>
                            <th>Date of Birth</th>
                            <td>@number.DateOfBirthHint.ToShortDateString()</td>
                            <td>Explanation</td>
                        </tr>
                        <tr>
                            <th>Age</th>
                            <td>@(number.AgeHint.HasValue ? number.AgeHint.Value.ToString("D") : "N/A")</td>
                            <td>Explanation</td>
                        </tr>
                    </table>
                </div>
            </section>
        }
    }
    else
    {
        <div class="alert alert-danger text-center" role="alert">
            <i class="fal fa-exclamation-triangle"></i> <strong>@Model.NumberInput</strong> is not recognized as a valid Swedish Personal Identity Number!
        </div>
    }
}